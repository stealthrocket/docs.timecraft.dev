"use strict";(self.webpackChunkdocs_timecraft_dev=self.webpackChunkdocs_timecraft_dev||[]).push([[711],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>m});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),c=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},s=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,s=p(e,["components","mdxType","originalType","parentName"]),u=c(n),h=a,m=u["".concat(l,".").concat(h)]||u[h]||d[h]||o;return n?r.createElement(m,i(i({ref:t},s),{},{components:n})):r.createElement(m,i({ref:t},s))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=h;var p={};for(var l in t)hasOwnProperty.call(t,l)&&(p[l]=t[l]);p.originalType=e,p[u]="string"==typeof e?e:a,i[1]=p;for(var c=2;c<o;c++)i[c]=n[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}h.displayName="MDXCreateElement"},1061:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>p,toc:()=>c});var r=n(7462),a=(n(7294),n(3905));const o={},i="Python",p={unversionedId:"applications/python",id:"applications/python",title:"Python",description:"Python applications aren't compiled to WebAssembly. Rather, a Python interpreter (CPython)",source:"@site/docs/applications/python.md",sourceDirName:"applications",slug:"/applications/python",permalink:"/applications/python",draft:!1,editUrl:"https://github.com/stealthrocket/docs.timecraft.dev/tree/main/docs/applications/python.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Go",permalink:"/applications/go"},next:{title:"Guides",permalink:"/category/guides"}},l={},c=[{value:"Preparing Python",id:"preparing-python",level:2},{value:"Running your application with Timecraft",id:"running-your-application-with-timecraft",level:2},{value:"Preparing dependencies",id:"preparing-dependencies",level:3},{value:"Running Timecraft",id:"running-timecraft",level:3}],s={toc:c},u="wrapper";function d(e){let{components:t,...n}=e;return(0,a.kt)(u,(0,r.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"python"},"Python"),(0,a.kt)("p",null,"Python applications aren't compiled to WebAssembly. Rather, a Python interpreter (CPython)\nis compiled to WebAssembly and interprets your Python application as it would normally."),(0,a.kt)("p",null,"Minor patches have been made to both the CPython interpreter and standard library to ensure\nthat applications are able to create POSIX style sockets. This enables Python applications to\ncreate servers and connect to databases. We intend to upstream our patches at some stage."),(0,a.kt)("h2",{id:"preparing-python"},"Preparing Python"),(0,a.kt)("p",null,"We provide a pre-compiled Python interpreter and patched standard library. You can download them by running"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"curl -fsSL https://timecraft.s3.amazonaws.com/python/main/python.wasm -o python.wasm\ncurl -fsSL https://timecraft.s3.amazonaws.com/python/main/python311.zip -o python311.zip\n")),(0,a.kt)("p",null,"To build Python from scratch, see the instructions in the\n",(0,a.kt)("a",{parentName:"p",href:"https://github.com/stealthrocket/timecraft/tree/main/python"},(0,a.kt)("inlineCode",{parentName:"a"},"./python"))," dir."),(0,a.kt)("h2",{id:"running-your-application-with-timecraft"},"Running your application with Timecraft"),(0,a.kt)("h3",{id:"preparing-dependencies"},"Preparing dependencies"),(0,a.kt)("p",null,"It's recommended that you install your Python dependencies in a virtualenv:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"python3 -m venv env\nsource ./env/bin/activate\n(env) $ pip install -r /path/to/requirements.txt\n")),(0,a.kt)("h3",{id:"running-timecraft"},"Running Timecraft"),(0,a.kt)("p",null,"The Python interpreter needs to know where dependencies are installed\nand where the standard library ZIP is located."),(0,a.kt)("p",null,"Assuming both the interpreter (",(0,a.kt)("inlineCode",{parentName:"p"},"python.wasm"),") and standard library (",(0,a.kt)("inlineCode",{parentName:"p"},"python311.zip"),")\nare located in the current directory, you can pass this information to the\ninterpreter like so:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"export PYTHONHOME=env\nexport PYTHONPATH=python311.zip:$PYTHONHOME\n")),(0,a.kt)("p",null,"You can now run your application:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"timecraft run python.wasm main.py\n")))}d.isMDXComponent=!0}}]);